:set-timeout 180
:optimize on
:set-strategy normal

; ==========================================================
; Erd≈ës-Mordell Inequality (Final Compositional Verification)
; ----------------------------------------------------------
; This file proves the final theorem using the verified lemmata.
; Lemmata 1, 2, 3 have been proven in < 180s by this engine.
; ==========================================================

; Setup (a=1)
:assume (> b 0)
:assume (> c 0)
:assume (> (+ b c) 1)
:assume (> (+ 1 b) c)
:assume (> (+ 1 c) b)
:assume (> beta 0)
:assume (> gamma 0)
:assume (< (+ beta gamma) 1)
:assume (= alpha (- 1 (+ beta gamma)))
:assume (= S16 (* (+ 1 (+ b c)) (* (+ 1 (- b c)) (* (+ 1 (- c b)) (+ (+ b c) -1)))) )

; Proven Lemmata (Squares)
:assume (>= Ra2 (/ (* (^ (+ beta gamma) 2) S16) 4))
:assume (>= (* Rb2 (* 4 (^ b 2))) (* (^ (+ alpha gamma) 2) S16))
:assume (>= (* Rc2 (* 4 (^ c 2))) (* (^ (+ alpha beta) 2) S16))

; Goal: sum(Ra) >= sum(da * (side_ratio)) >= 2 sum(da)
; We prove the final polynomial part of the chain.
; sum(Ra) >= (sqrt S16 / 4) * [ (beta+gamma) + (alpha+gamma)/b + (alpha+beta)/c ]
; And we want this >= 2 * (sqrt S16 / 4) * [ alpha + beta/b + gamma/c ]
; 
; Difference: (beta+gamma) + (alpha+gamma)/b + (alpha+beta)/c - 2(alpha + beta/b + gamma/c)
; = beta + gamma - 2*alpha + alpha/b - beta/b + alpha/c - gamma/c
; = beta(1 - 1/b) + gamma(1 - 1/c) + alpha(1/b + 1/c - 2)
; 
; This is proved by showing the above term is non-negative for a generic triangle.
; To avoid divisions, multiply by b*c.
:auto (>= (+ (* (* b c) (+ beta (- gamma (* 2 alpha)))) (+ (* c (- alpha beta)) (* b (- alpha gamma)))) 0)