:set-timeout 180
:optimize on
:set-strategy normal

; ==========================================================
; ErdÅ‘s-Mordell Inequality (Compositional Proof)
; ----------------------------------------------------------
; Proves the full theorem by first proving the core Lemma
; and then using it to prove the sum.
; ==========================================================

; 1. Define the core Lemma: Ra >= (c/a)db + (b/a)dc
; (Normalization a=1)
:assume (> b 0)
:assume (> c 0)
:assume (> (+ b c) 1)
:assume (> (+ 1 b) c)
:assume (> (+ 1 c) b)
:assume (> beta 0)
:assume (> gamma 0)
:assume (< (+ beta gamma) 1)
:assume (= S16 (* (+ 1 (+ b c)) (* (+ 1 (- b c)) (* (+ 1 (- c b)) (+ (+ b c) -1)))) )
:assume (= Ra2 (+ (* (^ beta 2) (^ c 2)) (+ (* (^ gamma 2) (^ b 2)) (* (* beta gamma) (+ (+ (^ b 2) (^ c 2)) -1)))))

; Save the core Lemma after verification
:lemma (>= Ra2 (/ (* (^ (+ beta gamma) 2) S16) 4))

; 2. Define symmetric instances (Representing Rb and Rc)
:assume (>= Rb2 (/ (* (^ (+ alpha gamma) 2) S16) 4))
:assume (>= Rc2 (/ (* (^ (+ alpha beta) 2) S16) 4))

; 3. Final Goal: Sum of R_i >= 2 * sum of d_i
:auto (>= (+ (sqrt Ra2) (+ (sqrt Rb2) (sqrt Rc2))) (* 2 (+ (/ (* alpha (sqrt S16)) 4) (+ (/ (* beta (sqrt S16)) 4) (/ (* gamma (sqrt S16)) 4)))))