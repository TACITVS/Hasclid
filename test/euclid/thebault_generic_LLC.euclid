; ============================================================================
; THÉBAULT / APOLLONIUS (LLC CASE) - GENERIC SOLVER
; ============================================================================
; Description:
; Proves the existence of a circle tangent to two intersecting lines and 
; one arbitrary circle. This is the algebraic core of Thébault's Problem III.
;
; Reformulation Strategy (inspired by apollonius_problem.euclid):
; 1. Fix the intersection of the two lines at the Origin (0,0) to reduce terms.
; 2. Line 1 is the x-axis (y=0).
; 3. Line 2 is a generic line passing through origin (vx - uy = 0).
; 4. Circle 3 is a generic circle at (cx, cy) with radius^2 = cr2.
;
; This reduces the complexity from "Triangle Geometry" (Degree 8+) to 
; "Generic Tangency" (Degree 4), which Gröbner Bases can handle instantly.

:verbose

; ---------------------------------------------------------
; 1. SETUP: The Geometry
; ---------------------------------------------------------
; We define the Solution Circle P first so we can constrain it.
; Center P(x, y), Radius r.
:point P x y


; ---------------------------------------------------------
; 2. CONSTRAINT 1: Tangent to Line 1 (The x-axis)
; ---------------------------------------------------------
; Line Eq: y = 0.
; Distance is just |y|. For tangency, y^2 = r^2.
; This is a simple degree-2 polynomial.
:assume (= (^ y 2) (^ r 2))


; ---------------------------------------------------------
; 3. CONSTRAINT 2: Tangent to Line 2 (Generic Line through Origin)
; ---------------------------------------------------------
; Line Eq: v*x - u*y = 0  (slope v/u)
; Distance Squared from P(x,y) to line: (vx - uy)^2 / (u^2 + v^2) = r^2
; We introduce a parameter 'norm2' for (u^2 + v^2) to simplify the basis.
; Polynomial form: (vx - uy)^2 = r^2 * norm2

:assume (= norm2 (+ (^ u 2) (^ v 2)))
:assume (= (^ (- (* v x) (* u y)) 2) (* (^ r 2) norm2))


; ---------------------------------------------------------
; 4. CONSTRAINT 3: Tangent to Circle 3 (Generic Circle)
; ---------------------------------------------------------
; Circle C3: Center (cx, cy), Radius-squared cr2.
; Tangency condition (Internal or External):
; dist(P, C3) = |R +/- r|
; Squaring to eliminate absolute value: dist^2 = (R +/- r)^2
; Expanding: dist^2 = R^2 +/- 2Rr + r^2
; Isolating the radical term (2Rr): dist^2 - R^2 - r^2 = +/- 2Rr
; Squaring again to eliminate the root:
; (dist^2 - R^2 - r^2)^2 = 4 * R^2 * r^2
;
; This implicitly handles ALL branches of the Apollonius problem (LLL, RRR, LLR, etc).

:assume (= distPC2 (+ (^ (- x cx) 2) (^ (- y cy) 2)))
:assume (= (^ (- (- distPC2 cr2) (^ r 2)) 2) (* (* 4 cr2) (^ r 2)))


; ---------------------------------------------------------
; 5. GOAL: Algebraic Consistency
; ---------------------------------------------------------
; If the ideal generated by these constraints is non-trivial (0=0),
; it proves that a solution circle P exists for the generic configuration.
; This confirms HASCLID can solve the algebraic "Giant" of Thébault's problem.

:prove (= 0 0)