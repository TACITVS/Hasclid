; ============================================================================
; ERDOSâ€“MORDELL INEQUALITY (EQUILATERAL, PURELY POLYNOMIAL)
; We prove R_b >= d_a + d_c via ((x+1)^2 + 3y^2)^2 >= 12*y^2*(x+1)^2
; and show LHS - RHS = ((x+1)^2 - 3y^2)^2.
; ============================================================================
:set-timeout 120
:optimize on
:set-strategy normal
:verbose

; Define polynomials
:assume (= LHS (^ (+ (^ (+ x 1) 2) (* 3 (^ y 2))) 2))
:assume (= RHS (* 12 (* (^ y 2) (^ (+ x 1) 2))))
:assume (= inner (- (^ (+ x 1) 2) (* 3 (^ y 2))))
:assume (= diff (- LHS RHS))
:assume (= fact (^ inner 2))

; Factorization
:prove (= diff fact)

; Expanded form of the square: (x^2 + 2x + 1 - 3y^2)^2
:assume (= expanded (+ (^ (^ (+ x 1) 2) 2) (* -6 (^ (+ x 1) 2) (^ y 2)) (* 9 (^ y 4))))
:prove (= fact expanded)

; Force algebraic check of non-negativity on the bare square
; Reset the context to avoid extra symbolic variables inflating complexity
:reset
:set-timeout 120
:optimize on
:set-strategy normal
:verbose

; Prove non-negativity directly on the square expression
:auto (>= (^ (- (^ (+ x 1) 2) (* 3 (^ y 2))) 2) 0)
