-- [square_3_lines_proof.euclid]
:set-order grevlex
-- Proposition to PROVE or DISPROVE: A square can be defined using constraints on only three line segments (AB, BC, CD).
--
-- We test this by defining a quadrilateral ABCD and imposing constraints only on AB, BC, and CD.
-- If the constraints are sufficient, they should logically imply the necessary constraint on the fourth side (DA).

-- 1. Setup the four vertices of a quadrilateral ABCD.
-- Let the intended side length be S (symbolic).
-- A, B, C are placed in a right-angle configuration, ensuring AB = BC = S and AB ‚ä• BC.
:point A 0 0  
:point B S 0  
:point C S S

-- D is a generic, unknown point (x, y).
:point D x y

-- 2. Impose ALL necessary constraints that only involve the three segments AB, BC, and CD.

-- CONSTRAINT 1: Side CD has the same squared length as AB and BC (i.e., S^2).
-- This forces dist^2(C, D) = S^2.
:assume (= (dist2 C D) (^ S 2))

-- CONSTRAINT 2: Segment BC must be perpendicular to CD (Right angle at C).
-- This forces Dot(BC, CD) = 0.
:assume (= (perpendicular B C C D) 0)

-- 3. Theorem to Prove (The Missing Constraint):
-- If ABCD is a square, the fourth side DA must also have length S.
-- We attempt to prove that dist^2(D, A) = S^2 is a consequence of the two assumptions above.
--
-- If this theorem is **false** (which it is), the initial proposition is disproven,
-- as the set of constraints is too weak and allows for non-square solutions
-- (e.g., a trapezoid D(2S, S) also satisfies the two constraints).

(= (dist2 D A) (^ S 2))

-- Expected Result: FALSE (The resulting polynomial's normal form will not be 0.)
-- DISPROVEN: Defining a square requires explicit constraints involving the fourth side DA.