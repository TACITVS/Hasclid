-- napoleon_algebraic.euclid
-- Proof of Napoleon's Theorem (Algebraic Approach)
-- This approach mimics the speed of the Euler Four-Square proof by 
-- bypassing the geometric solver and using pure polynomial arithmetic.

-- 1. Setup Variables
-- Triangle vertices: A=(0,0), B=(c,0), C=(u,v)
-- s = sqrt(3) constraint: s^2 = 3
:assume (= (^ s 2) 3)

-- 2. Define Coordinate Expressions for Centroids
-- We calculate the coordinates directly using the formula:
-- Centroid = Midpoint + (s/6) * RotatedVector
-- Vector Rotation (90 deg): (dx, dy) -> (-dy, dx)

-- Centroid P (on side BC):
-- Midpoint = ((c+u)/2, v/2)
-- Vector BC = (u-c, v) -> Rotated = (-v, u-c)
:assume (= px (+ (* (+ c u) 1/2) (* (* s 1/6) (- 0 v))))
:assume (= py (+ (* v 1/2)       (* (* s 1/6) (- u c))))

-- Centroid Q (on side CA):
-- Midpoint = (u/2, v/2)
-- Vector CA = (0-u, 0-v) -> Rotated = (v, -u)
:assume (= qx (+ (* u 1/2) (* (* s 1/6) v)))
:assume (= qy (+ (* v 1/2) (* (* s 1/6) (- 0 u))))

-- Centroid R (on side AB):
-- Midpoint = (c/2, 0)
-- Vector AB = (c, 0) -> Rotated = (0, c)
:assume (= rx (* c 1/2))
:assume (= ry (* (* s 1/6) c))

-- 3. Define Squared Distances
-- We manually expand the distance formula: dx^2 + dy^2
:assume (= distPQ (+ (^ (- px qx) 2) (^ (- py qy) 2)))
:assume (= distQR (+ (^ (- qx rx) 2) (^ (- qy ry) 2)))
:assume (= distRP (+ (^ (- rx px) 2) (^ (- ry py) 2)))

-- 4. The Proofs
-- Prove the triangle PQR is equilateral (all sides equal)

(= distPQ distQR)
(= distQR distRP)